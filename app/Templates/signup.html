{% extends "base.html" %}

{% block content %}
 <h1 >Create an account</h1>
    <form method="post">
        <p>
            <label for="fname">First name:</label>
            <input type="text" id="fname" name="fname" placeholder="Enter your name" />

        </p>
        <p>
            <label for="lname">Last name:</label>
            <input type="text" id="lname" name="lname" placeholder="Enter your name" />

        </p>
        <p>
            <label for="email">E-mail Address:</label>
            <input type="text" id="email" name="email" placeholder="Enter your email" />

        </p>
        <p>
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" placeholder="Create a password" />
            <input type="checkbox" onclick="showPassword()"> Show Password

        </p>
        <p>
            <label for="postcode">Postcode:</label>
            <input type="text" id="postcode" name="postcode" placeholder="Create a postcode" />

        </p>
        <p>
            <label for="address">Address:</label>
            <input type="text" id="address" name="address" placeholder="Input your address" />

        </p>
        <p>
            <input type="checkbox" name="terms" id="terms" value="" onchange="activateSubmit(this)"> I Agree To The <a href="terms">Terms & Conditions</a><br> <br>
        </p>
        <p>
            <input type="submit" id="submit" value="Send" name="Submit" disabled />
        </p>

        <div class="error-message" id="postcode-error"></div>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
            <span class="flash-error">{{ message }}</span>
        {% endfor %}
    {% endif %}
    {% endwith %}
</div>
    </form>


<script>
function activateSubmit(element) {
    var email = document.getElementById('email');
    var postcode = document.getElementById('postcode');
    var submit = document.getElementById('submit');
    var terms = document.getElementById('terms');
    var errorBox = document.getElementById('postcode-error');

    var emailRegex = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    var postcodeRegex = /^[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}$/i;

    if (element.checked) {

        // Email validation
        if (!emailRegex.test(email.value)) {
            errorBox.innerHTML = '<span class="flash-error">Please provide a valid email address</span>';
            submit.disabled = true;
            element.checked = false;
            return;
        }

        // Postcode validation
        if (!postcodeRegex.test(postcode.value)) {
            errorBox.innerHTML = '<span class="flash-error">Please provide a valid postcode</span>';
            submit.disabled = true;
            element.checked = false;
            return;
        }

        // All valid
        errorBox.innerHTML = '';
        submit.disabled = false;
        terms.value = "true";

    } else {
        submit.disabled = true;
        terms.value = "false";
        errorBox.innerHTML = '';
    }
}

function showPassword() {
  var x = document.getElementById("password");
  if (x.type === "password") {
    x.type = "text";
  } else {
    x.type = "password";
  }
}
</script>



</script>


{% endblock %}